# Weather ETL Pipeline — Data Model & Table Schema

This document describes the structure of the `weather` table generated by the ETL pipeline.  
It defines the columns, data types, and meaning of each field to support downstream analytics and reporting.

---

## Table: `weather`

### Grain  
Each row represents **one hourly weather observation** for a specific timestamp.

This table is intentionally kept simple and fully denormalized to reflect the purpose of the project:  
**demonstrating a complete ETL pipeline from extraction to automated loading.**

---

## Column Definitions

| Column Name                 | Type     | Description |
|-----------------------------|----------|-------------|
| `date`                      | TEXT     | Timestamp of the observation (ISO format). |
| `temperature_2m`            | REAL     | Air temperature at 2 meters above ground. |
| `dew_point_2m`              | REAL     | Dew point temperature at 2 meters. |
| `apparent_temperature`      | REAL     | “Feels like” temperature. |
| `pressure_msl`              | REAL     | Mean sea-level pressure. |
| `surface_pressure`          | REAL     | Pressure at the surface. |
| `vapour_pressure_deficit`   | REAL     | Atmospheric moisture deficit. |
| `et0_fao_evapotranspiration`| REAL     | Evapotranspiration estimate. |
| `wind_speed_180m`           | REAL     | Wind speed at 180 meters. |
| `wind_direction_180m`       | REAL     | Wind direction in degrees. |
| `wind_gusts_10m`            | REAL     | Wind gust speed at 10 meters. |
| `temperature_180m`          | REAL     | Temperature at 180 meters. |
| `soil_temperature_54cm`     | REAL     | Soil temperature at 54 cm depth. |
| `soil_moisture_27_to_81cm`  | REAL     | Soil moisture between 27–81 cm depth. |
| `relative_humidity_2m`      | REAL     | Relative humidity at 2 meters. |
| `precipitation`             | REAL     | Precipitation amount (mm). |
| `snow_depth`                | REAL     | Snow depth (cm). |
| `visibility`                | REAL     | Visibility distance (meters). |
| `hour`                      | INTEGER  | Hour extracted from the timestamp. |
| `is_daytime`                | INTEGER  | 1 = daytime, 0 = nighttime. |
| `is_nighttime`              | INTEGER  | 1 = nighttime, 0 = daytime. |
| `is_colder`                 | INTEGER  | Flag indicating colder-than-average conditions. |
| `is_warmer`                 | INTEGER  | Flag indicating warmer-than-average conditions. |
| `wind_direction`            | TEXT     | Cardinal wind direction (N, NE, E, etc.). |
| `wind_risk`                 | REAL     | Derived wind risk index. |
| `is_rain`                   | INTEGER  | 1 = rain detected, 0 = no rain. |
| `is_snow`                   | INTEGER  | 1 = snow detected, 0 = no snow. |
| `comfort_index`             | REAL     | Derived comfort score based on temperature & humidity. |
| `visibility_norm`           | REAL     | Normalized visibility score. |

---

## Notes on Data Modeling

- The table is intentionally **denormalized** to keep the ETL pipeline simple and focused.  
- No joins or relational modeling are required for this project.  
- The schema is designed for **analytics and demonstration**, not transactional workloads.  
- Additional tables (e.g., daily aggregates) can be added later if needed.

---

## Future Enhancements

- Add constraints or keys if the project evolves into a multi‑table model.  
- Add partitioning or retention logic if migrated to a larger database system.  
- Introduce a `locations` table if expanding to multiple geographic areas.